## Publishing with Bookdown on GitHub Pages {#publishing}
*by [Jack Dougherty](#contributors)*

TO DO: Include a longer introduction on why it matters, and then how we publish with Bookdown on GitHub Pages with custom domain
Note: See also way to include hypothesis commenting and other open review tools at: https://benmarwick.github.io/bookdown-ort/

#### GitHub and Bookdown reminders {-}
- GitHub Pages set to publish from  `master/docs`
- Bookdown settings: build all book formats into the `docs` folder
- GitHub Pages custom domain setting adds `CNAME` file to `docs` folder; do not delete
- Manually move `404.html` into 'docs' folder, since not auto-built; do not delete
- *CHECK* if `google-analytics-otl.html` needs to be manually placed in `docs` folder
- Manually add X.X-footer.Rmd to end of each chapter
- For final PDF and eBook build, remove cover image and footers

#### Markdown/bookdown syntax {-}

**IMPROVE** and compare with <https://bookdown.org/yihui/bookdown/markdown-syntax.html>

**ADD** more code and demo comparisons

Use brackets and parentheses for an [embedded link](http://example.com)

Use parentheses only for a non-embedded link (http://example.com)

Similarly, display URL with angle brackets: <http://example.com>

If necessary, use HTML to create <a href="http://example.com/" target="_blank">link that opens in a new page</a>

##### Headers and Cross-reference links {-}

Use one hashtag for a chapter title (first-level header)
```
# Chapter title
```
Use two hashtags for a section title (second-level header)
```
## Section title
```
A short chapter title `# Introduction` has a short default reference: `#introduction`

TODO: ADD CORRECTIONS about longer refs BELOW
While a longer chapter title `# Defining City and Suburban Lines` has a longer default reference: `#defining-city-and-suburban-lines`

To simplify long chapter title references, insert a short ID name in curly brackets: `# Defining City and Suburban Lines {#defining}`

Embed a cross-reference link to chapter or section with brackets and parenthesis:

code: `*by [Jack Dougherty](#contributors)*` with demo: *by [Jack Dougherty](#contributors)*

code: `see chapter [Defining City and Suburban Lines](#defining)` with demo: see chapter [Defining City and Suburban Lines](#defining)

Hide numbers from appearing in section headers with curly brackets around hyphen:
- code: `## Outline of the Book {-}`

However, since I have not yet found a way to insert a short section reference AND hide its number, we must use full section references with hidden numbers:
```



For an em-dash, use three hyphens---like this---rather than two hyphens.

For a block quote, start each line with a caret:

> I thoroughly disapprove of duels. If a man should challenge me,
  I would take him kindly and forgivingly by the hand and lead him
  to a quiet place and kill him. -- Mark Twain, notable American author  

Insert line breaks with more carets *and* typing two spaces at end of each line:  

> I thoroughly disapprove of duels. If a man should challenge me,
  I would take him kindly and forgivingly by the hand and lead him
  to a quiet place and kill him.    
> --- Mark Twain  
> --- notable American author  


A text-only footnote.^[This is a footnote, with no reference]

BibText footnote with semi-colons to separate cites: [@hirschMakingSecondGhetto1983; @jacksonCrabgrassFrontierSuburbanization1985; @tyackOneBestSystem1974]

Markdown caret-footnote, which can accept multiple references with complex punctuation.^[On this theme, see @doughertyReviewConnecticutPublic2011. On a different theme, see @doughertySchoolChoiceSuburbia2009, pp. 33-35]

Insert image using Markdown syntax:

![Using markdown: auto-number does not appear in web, but appears in pdf, text *with italics*, no center-alignment on web, but centered in PDF, with [source link](https://google.com), with caret-footnote.^[@doughertySchoolChoiceSuburbia2009]](images/1890-MabelFlorenceWhite-ZoomIn-HPHS-SeniorClass.jpg)

#### Subheadings need four hashtags and no-number symbol {-}
- Note: Using three hashtags makes the subheader appear in the TOC because I have not found way to control toc_depth in web output. Use the no-number symbol to prevent automatic number of subheaders.

** Use 5 hashtags for digital image headers **, and imperative verbs to hint interactive use

##### Explore the Chart: embedded HTML iframe {-}
<iframe src="https://jackdougherty.github.io/highcharts-scatter-csv-instructor-sample/" width="90%" height="420px"></iframe>
*REMINDER: Insert caption, shortlinks, and footnote immediately afterwards in body text, in italics.*

##### Scroll the map: embedded HTML iframe {-}
<iframe src="https://ontheline.github.io/otl-town-borders/" width="90%" height="525px"></iframe>
*Scroll down the narrative (or click and use arrow keys) to see how Hartford County, Connecticut divided into 29 separate towns from the early 1600s to the late 1800s. Boundaries shown here are not exact, but approximated from the best available digital sources: [UConn Libraries MAGIC historical maps](http://magic.lib.uconn.edu), [Atlas of Historical County Boundaries at Newberry Library](http://publications.newberry.org/ahcbp/pages/Connecticut.html), and the [Connecticut State Register and Manual](http://www.ct.gov/sots/cwp/view.asp?a=3188&q=392440). View [map historical sources, known issues, and the code](https://github.com/ontheline/otl-town-borders/), developed by Ilya Ilyankou and Jack Dougherty.^[@ilyankouMapTownBorders2017]*
*REMINDER: Insert caption, shortlinks, and footnote immediately afterwards in body text, in italics.*

##### Play YouTube video: embedded HTML iframe from secure https {-}
<iframe width="560" height="315" src="https://www.youtube.com/embed/Gl3uIRYYUmI?rel=0" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
*REMINDER: Insert caption, shortlinks, and footnote immediately afterwards in body text, in italics.*

##### Explore the Source: embedded PDF {-}
<iframe src="images/sample-3pp.pdf#page=2" width="90%" height="400">
This browser does not support PDFs. Please download to view it: <a href="images/sample-3pp.pdf">Download PDF</a></iframe>
*REMINDER: Insert caption, shortlinks, and footnote immediately afterwards in body text, in italics.* 

TODO: Compare with other PDF embed strategies:

- See https://pdfobject.com/static.html
- See https://github.com/mozilla/pdf.js

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9.4 On The Line Style Guide for Bookdown + RMarkdown | On The Line: How Schooling, Housing, and Civil Rights Shaped Hartford and its Suburbs</title>
  <meta name="description" content="This open-access digital and print history book makes visible the hidden schooling and housing boundaries that divide metropolitan Hartford, Connecticut, and tells the stories of civil rights activists and everyday families who sought to cross over, redraw, or erase these lines." />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="9.4 On The Line Style Guide for Bookdown + RMarkdown | On The Line: How Schooling, Housing, and Civil Rights Shaped Hartford and its Suburbs" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://ontheline.trincoll.edu/" />
  <meta property="og:image" content="http://ontheline.trincoll.edu/images/coverOTL300x300.png" />
  <meta property="og:description" content="This open-access digital and print history book makes visible the hidden schooling and housing boundaries that divide metropolitan Hartford, Connecticut, and tells the stories of civil rights activists and everyday families who sought to cross over, redraw, or erase these lines." />
  <meta name="github-repo" content="ontheline/otl-bookdown" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9.4 On The Line Style Guide for Bookdown + RMarkdown | On The Line: How Schooling, Housing, and Civil Rights Shaped Hartford and its Suburbs" />
  <meta name="twitter:site" content="@doughertyjack" />
  <meta name="twitter:description" content="This open-access digital and print history book makes visible the hidden schooling and housing boundaries that divide metropolitan Hartford, Connecticut, and tells the stories of civil rights activists and everyday families who sought to cross over, redraw, or erase these lines." />
  <meta name="twitter:image" content="http://ontheline.trincoll.edu/images/coverOTL300x300.png" />

<meta name="author" content="Jack Dougherty" />
<meta name="author" content="and contributors" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="bookdown.html"/>
<link rel="next" href="alternative.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<script src="libs/elevate-section-attrs-2.0/elevate-section-attrs.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script>
  // adjust web edition height or width of iframe for specific figure references, using tilde (~iframe)
$(document).ready(function() {
  $("#fig\\:1910-2010-otl-home-value~iframe").attr("height", "565px");
  $("#fig\\:1910-2010-otl-home-value2~iframe").attr("height", "565px");
  $("#fig\\:1876-scribners-monthly~iframe").attr("height", "660px");
  $("#fig\\:1876-scribners-monthly~iframe").attr("width", "100%");
  $("#fig\\:1876-scribners-monthly2~iframe").attr("height", "660px");
  $("#fig\\:1876-scribners-monthly2~iframe").attr("width", "100%");
  $("#fig\\:1600s-otl-town-borders~iframe").attr("height", "600px");
  $("#fig\\:1600s-otl-town-borders~iframe").attr("width", "100%");
  $("#fig\\:1937-otl-redlining~iframe").attr("height", "600px");
  $("#fig\\:1937-otl-redlining~iframe").attr("width", "100%");
  $("#fig\\:1940-otl-covenants~iframe").attr("height", "500px");
  $("#fig\\:1940-otl-covenants2~iframe").attr("height", "500px");

  $("#fig\\:sample-interactive~iframe").attr("height", "600px");
  $("#fig\\:sample-interactive~iframe").attr("width", "100%");
})
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5488840-4', 'auto');
  ga('send', 'pageview');

</script>



<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"><strong>On the Line</strong><br>by Jack Dougherty & contributors</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="about-the-book.html"><a href="about-the-book.html"><i class="fa fa-check"></i>About the Book</a></li>
<li class="chapter" data-level="" data-path="authors-and-contributors.html"><a href="authors-and-contributors.html"><i class="fa fa-check"></i>Authors and Contributors</a></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="how-to-read-and-cite.html"><a href="how-to-read-and-cite.html"><i class="fa fa-check"></i>How to Read and Cite</a></li>
<li class="chapter" data-level="" data-path="copyright-with-open-access.html"><a href="copyright-with-open-access.html"><i class="fa fa-check"></i>Copyright with Open Access</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> My Introduction to the Lines</a>
<ul>
<li class="chapter" data-level="1.1" data-path="bridging.html"><a href="bridging.html"><i class="fa fa-check"></i><b>1.1</b> Bridging the History Gap</a></li>
<li class="chapter" data-level="1.2" data-path="outline.html"><a href="outline.html"><i class="fa fa-check"></i><b>1.2</b> Outline of the Book</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="defining.html"><a href="defining.html"><i class="fa fa-check"></i><b>2</b> Defining City and Suburban Lines</a>
<ul>
<li class="chapter" data-level="2.1" data-path="richest.html"><a href="richest.html"><i class="fa fa-check"></i><b>2.1</b> The Richest City in the Nation</a></li>
<li class="chapter" data-level="2.2" data-path="carving.html"><a href="carving.html"><i class="fa fa-check"></i><b>2.2</b> Carving Up Town Boundaries</a></li>
<li class="chapter" data-level="2.3" data-path="golden.html"><a href="golden.html"><i class="fa fa-check"></i><b>2.3</b> A Golden Age for City Schools</a></li>
<li class="chapter" data-level="2.4" data-path="rural.html"><a href="rural.html"><i class="fa fa-check"></i><b>2.4</b> Challenges for Rural and Early Suburban Schools</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="separating.html"><a href="separating.html"><i class="fa fa-check"></i><b>3</b> Separating with Color and Class Lines</a>
<ul>
<li class="chapter" data-level="3.1" data-path="lending.html"><a href="lending.html"><i class="fa fa-check"></i><b>3.1</b> Federal Lending and Redlining</a></li>
<li class="chapter" data-level="3.2" data-path="restricting.html"><a href="restricting.html"><i class="fa fa-check"></i><b>3.2</b> Restricting with Property Covenants</a></li>
<li class="chapter" data-level="3.3" data-path="public-housing.html"><a href="public-housing.html"><i class="fa fa-check"></i><b>3.3</b> Racial Barriers to Public Housing</a></li>
<li class="chapter" data-level="3.4" data-path="origins-zoning.html"><a href="origins-zoning.html"><i class="fa fa-check"></i><b>3.4</b> Origins of Exclusionary Zoning</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="selling.html"><a href="selling.html"><i class="fa fa-check"></i><b>4</b> Selling and Shopping the Lines</a></li>
<li class="chapter" data-level="5" data-path="challenging.html"><a href="challenging.html"><i class="fa fa-check"></i><b>5</b> Challenging the Power Lines</a>
<ul>
<li class="chapter" data-level="5.1" data-path="mobilizing.html"><a href="mobilizing.html"><i class="fa fa-check"></i><b>5.1</b> Mobilizing Against Racial Steering and Redlining</a></li>
<li class="chapter" data-level="5.2" data-path="jumping.html"><a href="jumping.html"><i class="fa fa-check"></i><b>5.2</b> Jumping the School District Line</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="choosing.html"><a href="choosing.html"><i class="fa fa-check"></i><b>6</b> Choosing to Cross the Lines</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Where Do We Draw the Line?</a></li>
<li class="chapter" data-level="8" data-path="teaching-researching.html"><a href="teaching-researching.html"><i class="fa fa-check"></i><b>8</b> Teaching and Researching <em>On The Line</em></a>
<ul>
<li class="chapter" data-level="8.1" data-path="investigating.html"><a href="investigating.html"><i class="fa fa-check"></i><b>8.1</b> Investigating Spatial Inequality with the Cities Suburbs and Schools Project</a></li>
<li class="chapter" data-level="8.2" data-path="writing.html"><a href="writing.html"><i class="fa fa-check"></i><b>8.2</b> Writing Greater Hartford’s Civil Rights Past with ConnecticutHistory.org</a></li>
<li class="chapter" data-level="8.3" data-path="teaching-oral-history.html"><a href="teaching-oral-history.html"><i class="fa fa-check"></i><b>8.3</b> Teaching Oral History</a></li>
<li class="chapter" data-level="8.4" data-path="who-owns-oral-history.html"><a href="who-owns-oral-history.html"><i class="fa fa-check"></i><b>8.4</b> Who Owns Oral History? A Creative Commons Solution</a></li>
<li class="chapter" data-level="8.5" data-path="oral-history-consent.html"><a href="oral-history-consent.html"><i class="fa fa-check"></i><b>8.5</b> Oral History Consent Form</a></li>
<li class="chapter" data-level="8.6" data-path="covenants.html"><a href="covenants.html"><i class="fa fa-check"></i><b>8.6</b> How We Found Restrictive Covenants</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="mapping-publishing.html"><a href="mapping-publishing.html"><i class="fa fa-check"></i><b>9</b> Mapping and Publishing <em>On The Line</em></a>
<ul>
<li class="chapter" data-level="9.1" data-path="digital-history-dialogue.html"><a href="digital-history-dialogue.html"><i class="fa fa-check"></i><b>9.1</b> A Digital History Dialogue</a></li>
<li class="chapter" data-level="9.2" data-path="maps-and-charts.html"><a href="maps-and-charts.html"><i class="fa fa-check"></i><b>9.2</b> List of Interactive Maps and Charts</a></li>
<li class="chapter" data-level="9.3" data-path="bookdown.html"><a href="bookdown.html"><i class="fa fa-check"></i><b>9.3</b> Building with Bookdown, GitHub, and Zotero</a></li>
<li class="chapter" data-level="9.4" data-path="style-guide.html"><a href="style-guide.html"><i class="fa fa-check"></i><b>9.4</b> <em>On The Line</em> Style Guide for Bookdown + RMarkdown</a></li>
<li class="chapter" data-level="9.5" data-path="alternative.html"><a href="alternative.html"><i class="fa fa-check"></i><b>9.5</b> Alternative Publishing Platforms</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="bibliography.html"><a href="bibliography.html"><i class="fa fa-check"></i><b>10</b> Bibliography</a></li>
<li class="divider"></li>
<li><a href="https://acpress.amherst.edu/" target="_blank">Open access book-in-progress</br>for Amherst College Press</a></li>
<li><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a></li>
<li><a href="https://bookdown.org" target="_blank">Built with Bookdown + RStudio</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">On The Line: How Schooling, Housing, and Civil Rights Shaped Hartford and its Suburbs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="style-guide" class="section level2" number="9.4">
<h2 number="9.4"><span class="header-section-number">9.4</span> <em>On The Line</em> Style Guide for Bookdown + RMarkdown</h2>
<p><strong>Important: See the code used in the examples on this page</strong> by viewing it directly on the GitHub repo at <a href="https://github.com/OnTheLine/otl-bookdown/blob/master/09.4-style-guide.Rmd" class="uri">https://github.com/OnTheLine/otl-bookdown/blob/master/09.4-style-guide.Rmd</a>.</p>
<div id="general-goals" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">General Goals</h4>
<p>The broad goal is to compose one version of the text that Bookdown will generate into multiple book products: Web HTML edition, PDF edition, MS Word edition, etc. The Web edition is preferred because only it displays interactive online content (such as interactive maps, scrollable sources, and video clips). But the PDF and MS Word editions are designed to display static screenshots of interactive content, as well as clickable links and footnotes/endnotes for source materials. Also, to make the Web edition as accessible as feasible for visually-impaired readers, this book is continually tested using the <a href="http://wave.webaim.org/">Wave Accessibility Evaluation Tool</a>.</p>
<p>Also, this style guide was created primarily for the web edition of <em>On The Line</em> at <a href="http://OnTheLine.trincoll.edu" class="uri">http://OnTheLine.trincoll.edu</a>, and may require additional modifications prior to publishing the final PDF print edition.</p>
</div>
<div id="markdown-vs.-r-markdown" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">Markdown vs. R Markdown</h4>
<p>The text is based on the easy-to-read Markdown syntax, which is summarized in this <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">popular cheatsheet</a> and this <a href="https://www.markdowntutorial.com">interactive tutorial</a>. But Bookdown uses its own flavor: <a href="https://rmarkdown.rstudio.com/">RMarkdown by RStudio</a>.</p>
</div>
<div id="formatting" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">Formatting</h4>
<p>Use brackets and parentheses for an <a href="http://example.com">embedded link</a>, and remember to add a footnote as shown below.</p>
<p>To display the URL of a non-embedded link, use only parentheses (<a href="http://example.com" class="uri">http://example.com</a>) or angle brackets <a href="http://example.com" class="uri">http://example.com</a>.</p>
<p>The book is designed for links to open in the same browser tab, since readers should use a right-click or two-finger click to open links in new tabs when desired. Only if absolutely necessary, use HTML tags to create <a href="http://example.com/">link that opens in a new page</a>.</p>
<p>Use HTML-style code comments to insert notes that are invisible in the book products, yet are visible to authors (or anyone) viewing the source code in the public GitHub repo, such as this TODO reminder:
<!-- TODO this comment appears in the source code, but not the book products --></p>
<p>For an en-dash, use only two hyphens–like this–and compare with below.</p>
<p>For an em-dash, use three hyphens—like this—and compare with above.</p>
<p>For a block quote, start each line with a caret <strong>AND</strong> add two spaces to insert a line break:</p>
<blockquote>
<p>I thoroughly disapprove of duels. If a man should challenge me, I would take him kindly and forgivingly by the hand and lead him to a quiet place and kill him.<br />
— Mark Twain<br />
— notable American author</p>
</blockquote>
</div>
<div id="headers-and-cross-reference-links" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">Headers and Cross-reference links</h4>
<p>In this book, we refer to both chapters (1, 2, etc.) and subchapters (1.1, 1.2, etc.) as “chapters” for simplicity. But Bookdown refers to these as chapters and sections, respectively.</p>
<ul>
<li>Chapter titles are first-level headers with one hashtag: <code># Chapter Title</code></li>
<li>Subchapter titles (or section titles) are second-level headers with two hashtags: <code>## Subchapter Title</code></li>
<li>Avoid third-level headers with three hashtags, since have not yet found easy control for toc_depth in HTML edition.</li>
<li>Subheaders are fourth-level headers with four hashtags: <code>#### Subheader in body text</code></li>
<li>Avoid fifth-level headers with five hashtags, since have not yet found easy control for toc_depth in PDF edition.</li>
</ul>
<p>Since the <code>index.Rmd</code> settings add numbers to chapters/sections, remember to block numbers from appearing in fourth- and fifth-level headers by adding curly brackets arounds a hyphen: <code>#### Subheader non-numbered {-}</code></p>
<p>In Bookdown, a short chapter/section title <code># Introduction</code> has a short default reference: <code>#introduction</code>. Also, a longer chapter/section title <code># Defining City and Suburban Lines</code> has a longer default reference: <code>#defining-city-and-suburban-lines</code>.</p>
<p>This book simplifies each chapter/section title reference by adding a short ID name in curly brackets, like this: <code># Defining City and Suburban Lines {#defining}</code>.</p>
<p>Also, this book matches the short ID name <code>{#defining}</code> to the file name <code>02-defining.Rmd</code>. Although Bookdown does not require the file name and short ID to match, this method helps authors to organize all cross-references.</p>
<p>To embed a cross-reference to another chapter/section in the book, add an HTML link using brackets and parentheses. See code: <code>*by [Ilya Ilyankou and Jack Dougherty](authors-and-contributors.html)*</code> with demo: <em>by <a href="authors-and-contributors.html">Ilya Ilyankou and Jack Dougherty</a></em>. This method works best for the HTML edition.</p>
</div>
<div id="conditional-html-vs-latex-output" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">Conditional HTML vs LaTex Output</h4>
<p>The R package function <code>is_[html/latex]_output</code> allows authors to produce conditional output for different book products, such as text that should appear in the HTML edition but not the PDF edition, or vice versa. For example, this book displays a footer in the HMTL edition, but not the PDF edition. See more at <a href="https://blog.earo.me/2019/10/26/reduce-frictions-rmd/" class="uri">https://blog.earo.me/2019/10/26/reduce-frictions-rmd/</a>. Compare these code examples:</p>
<p>This line appears in the HTML edition, and is commented-out in the PDF edition.</p>
<!--
This line appears in the PDF edition, and is commented-out in the HTML edition.
-->
</div>
<div id="preface-and-footers" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">Preface and Footers</h4>
<p>In this book, <code>index.Rmd</code> begins with a non-numbered first-level header <code># Preface {-}</code>, followed by non-numbered second-level headers such as <code>## Authors and Contributors {-}</code> and <code>## Acknowledgements {-}</code>. All of this content is placed in the <code>index.Rmd</code> file because creating zero-numbered files (such as 0.1-about.Rmd) generated Bookdown errors.</p>
<p>Also, at the end of each section in the main text, an HTML-only footer has been manually pasted, to ensure that each long web page contains author and copyright information, with links to key sections in the Preface, in case readers print out individual chapters from their browsers. TODO: Find a way to replace manually-pasted footers with a block that is global to the entire book.</p>
</div>
<div id="footnotesendnotes" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">Footnotes/Endnotes</h4>
<p>A text-only footnote.<a href="#fn197" class="footnote-ref" id="fnref197"><sup>197</sup></a></p>
<p>To create a footnote with citations only, separate BibTeX citation keys with semi-colons:<span class="citation"><a href="#fn198" class="footnote-ref" id="fnref198"><sup>198</sup></a></span></p>
<p>Since footnotes also may include text and punctuation in Markdown syntax, always insert a caret symbol prior to the brackets to demarcate a footnote:<a href="#fn199" class="footnote-ref" id="fnref199"><sup>199</sup></a></p>
<p><strong>TODO: KNOWN ISSUE in this book re: footnotes/endnotes</strong>
Using Bookdown version 0.16 as of January 2020, note numbering appears differently across editions, and needs to be addressed prior to final publication:</p>
<ul>
<li><p>In the Web HTML edition, customized code in <code>style.css</code> renumbers endnotes at the beginning of each chapter (e.g. 2) and subchapter (e.g. 2.1), as desired by the author.</p></li>
<li><p>But in the PDF edition, endnote renumbering begins only at each chapter, not subchapter, regardless of the custom CSS code. Probably need to change a Pandoc LaTeX setting.</p></li>
<li><p>In the MS Word edition, footnotes (rather than endnotes) are continuously numbered without breaks across the entire document, regardless of the custom CSS code.</p></li>
<li><p>Also, avoid placing footnotes in image captions, since URLs cause an extra } symbol to appear when generating PDF version, which crashes the build. Instead, place dynamic reference in the body text immediately before the image, along with footnote ref.</p></li>
</ul>
</div>
<div id="r-code-chunks-to-display-interactive-iframes-and-static-images" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">R Code Chunks to Display Interactive iFrames and Static Images</h4>
<p>In the body of the book, avoid inserting images with simple Markdown syntax, because it does not support Bookdown figure auto-numbering and caption formatting, and does not translate well into PDF and MS Word formats. Instead, follow this R “code chunk” method, as shown in the examples further below for:</p>
<ol style="list-style-type: decimal">
<li>Static images, in Web and PDF and MS Word editions</li>
<li>Interactive maps and charts in Web edition, with static images in PDF and MS Word editions</li>
<li>Scrolling PDF files in the Web edition, with static screenshots in the PDF and MS Word editions</li>
<li>Playable videos (from different servers) in Web edition, with static screenshots in PDF and MS Word editions</li>
</ol>
</div>
<div id="overview-of-r-code-chunks" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">Overview of R Code Chunks</h4>
<ul>
<li>Define a text reference for captions, because this method accepts complex syntax, such as RMarkdown links, as shown in the examples below. Do NOT insert footnote references in the caption. Instead, place them in the body text, as explained above.</li>
<li>Insert a BLANK LINE between the text reference and the R code chunk that follows.</li>
<li>Insert an R code chunk <a href="https://bookdown.org/yihui/bookdown/r-code.html" class="uri">https://bookdown.org/yihui/bookdown/r-code.html</a>, with NO SPACES between ref:chunk-label, as shown in the examples below below.</li>
<li>To reduce the width (or height) of the output, add <code>out.width="50%"</code> to the code chunk, which works for Web edition and also PDF edition.</li>
<li>To display interactive content in the Web edition and a static image in the PDF edition, create both elements and insert an if-else statement in the R code chunk to display these elements in different outputs, as shown below. (Thanks to Michael Dorman for this tip.)</li>
<li>If the interactive content includes an iframe (for a map or chart), the default height will be 400 pixels. To adjust the iframe height (or width), insert a line of code in the <code>custom-scripts.html</code> file and add a code comment to the text to serve as a reminder, as shown below. Also, make sure that the <code>index.Rmd</code> file includes the custom script in the header, as described in the section above.</li>
<li>In the body text, insert a dynamic reference to the image in the same file, because PDF engine creates floating images that may be placed on the next page. Example of dynamic ref followed by footnote: …as shown in Image <a href="style-guide.html#fig:sample-interactive">49</a>.<a href="#fn200" class="footnote-ref" id="fnref200"><sup>200</sup></a></li>
<li>Reminder: If the image appears a second time in the book, in a separate chapter, be sure to relabel the text ref: year-title2.</li>
<li>Reminder: Bookdown does not auto-number figures in the <code>index.Rmd</code> file, which serves as a preface or introduction.</li>
<li><strong>TODO: KNOWN ISSUES to address prior to final PDF edition</strong>:
<ul>
<li>HTML edition labels images by sequential number across the entire book (1, 2, 3 etc.), while PDF edition labels images by chapter number (1.1, 1.2, 2.1, etc.). See <a href="https://bookdown.org/yihui/bookdown/latexpdf.html" class="uri">https://bookdown.org/yihui/bookdown/latexpdf.html</a> and <a href="https://pandoc.org/MANUAL.html#variables-for-latex" class="uri">https://pandoc.org/MANUAL.html#variables-for-latex</a>.</li>
<li>Reminder from <a href="https://bookdown.org/yihui/rmarkdown/r-code.html#figures">Yihui Xie</a>: “PDF documents are generated through the LaTeX files generated from R Markdown. A highly surprising fact to LaTeX beginners is that figures float by default: even if you generate a plot in a code chunk on the first page, the whole figure environment may float to the next page. This is just how LaTeX works by default. It has a tendency to float figures to the top or bottom of pages. Although it can be annoying and distracting, we recommend that you refrain from playing the “Whac-A-Mole” game in the beginning of your writing, i.e., desperately trying to position figures “correctly” while they seem to be always dodging you. You may wish to fine-tune the positions once the content is complete using the fig.pos chunk option (e.g., fig.pos = ‘h’). See <a href="https://www.sharelatex.com/learn/Positioning_images_and_tables" class="uri">https://www.sharelatex.com/learn/Positioning_images_and_tables</a> for possible values of fig.pos and more general tips about this behavior in LaTeX. In short, this can be a difficult problem for PDF output."</li>
<li>Decide whether to create PDF versions of JPG/PNG images to improve quality of output, and if so, set <code>auto_pdf = TRUE</code> inside <code>include_graphics()</code>. Read more at <a href="https://bookdown.org/yihui/bookdown/figures.html" class="uri">https://bookdown.org/yihui/bookdown/figures.html</a>.</li>
<li>Decide if ‘out.width’ and ‘out.height’ are preferable in all cases to <code>"fig_height=7"</code>.</li>
<li>For images less than full-width, decide whether to insert <code>fig.align="center"</code> for PDF output, since this currently throws an error in MS Word output.</li>
</ul></li>
</ul>
</div>
<div id="example-1-static-image-in-all-editions-half-size-output-no-interactive-version" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">Example 1: Static image in all editions, half-size output, no interactive version</h4>

<div class="figure"><span id="fig:sample-static-image"></span>
<img src="images/1937-holc-hartford-map-scan.jpg" alt="Caption for sample static image, with Markdown formatting and links." width="50%" />
<p class="caption">
Image 48: Caption for sample static image, with Markdown formatting and links.
</p>
</div>
</div>
<div id="example-2-interactive-iframe-in-web-edition-with-adjusted-height-static-image-in-pdf-edition" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">Example 2: Interactive iframe in web edition (with adjusted height), static image in PDF edition</h4>

<!-- set iframe 600px height 100% width in custom-scripts.html -->
<div class="figure"><span id="fig:sample-interactive"></span>
<iframe src="https://ontheline.github.io/otl-redlining/" width="672" height="400px">
</iframe>
<p class="caption">
Image 49: Caption for all versions here, with link to <a href="https://ontheline.github.io/otl-redlining/index-caption.html">full-screen interactive map with its own caption</a>, and link to <a href="https://github.com/ontheline/otl-redlining/">map historical sources, known issues, and the code</a>, developed by Ilya Ilyankou and Jack Dougherty.
</p>
</div>
</div>
<div id="example-3-locally-stored-pdf-scrolling-in-web-edition-static-screenshot-in-pdf-edition" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">Example 3: Locally stored PDF scrolling in web edition, static screenshot in PDF edition</h4>

<div class="figure"><span id="fig:pdf-sample-local"></span>
<iframe src="images/sample-3pp.pdf" width="672" height="400px">
</iframe>
<p class="caption">
Image 50: Here’s a sample PDF that is locally stored in the GitHub repo, with option to add Markdown link.
</p>
</div>
<!-- TODO: test all video examples below in Windows Edge and Android devices -->
</div>
<div id="example-4a-youtube-video-iframe-in-web-edition-static-image-in-pdf-edition" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">Example 4a: YouTube video iframe in web edition, static image in PDF edition</h4>

<div class="figure"><span id="fig:youtube-sample-video"></span>
<iframe src="https://www.youtube.com/embed/NuWg9Jrkrpw?start=64" width="672" height="400px">
</iframe>
<p class="caption">
Image 51: Here’s a sample caption for a YouTube video, with option to add Markdown link (to the full video on a historical preservation server, such as CTDA). Successfully avoids auto-play issue. YouTube video formatting in HMTL seems to be cleaner than Vimeo formatting.
</p>
</div>
</div>
<div id="example-4b-vimeo-video-iframe-in-web-edition-static-image-in-pdf-edition" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">Example 4b: Vimeo video iframe in web edition, static image in PDF edition</h4>

<div class="figure"><span id="fig:vimeo-sample-video"></span>
<iframe src="https://player.vimeo.com/video/27299734" width="672" height="400px">
</iframe>
<p class="caption">
Image 52: Here’s a sample caption for Vimeo video, with option to add Markdown link (to the full video on a historical preservation server, such as CTDA). Successfully avoids auto-play issue. But Vimeo formatting in HTML is not always clean.
</p>
</div>
</div>
<div id="example-4c-kaltura-video-iframe-in-web-edition-static-image-in-pdf-edition" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">Example 4c: Kaltura video iframe in web edition, static image in PDF edition</h4>

<div class="figure"><span id="fig:kaltura-sample-video"></span>
<iframe src="https://cdnapisec.kaltura.com/html5/html5lib/v2.76/mwEmbedFrame.php/p/2366381/uiconf_id/42684261/entry_id/1_66aksvf1?wid=_2366381&amp;iframeembed=true&amp;playerId=kaltura_player&amp;entry_id=1_66aksvf1" width="672" height="400px">
</iframe>
<p class="caption">
Image 53: Here’s a sample caption for a video on Trinity Kaltura server, using an HTML5 embed code that is unclear if is currently supported, but still works as of January 2020. (The default Kaltura “share” embed code is not properly formatted in the iframe.) Successfully avoids auto-play issue.
</p>
</div>
<p>Note that as of January 2020, videos uploaded to CTDA have datastreams generated in MP4 video format, but these run in auto-play format in the browser, which CTDA cannot turn off, so not appropriate to display in the browser in this book. See sample video datastream: <a href="https://collections.ctdigitalarchive.org/islandora/object/120002:172/datastream/MP4" class="uri">https://collections.ctdigitalarchive.org/islandora/object/120002:172/datastream/MP4</a> and read more <a href="https://confluence.uconn.edu/display/CTDA/Datastreams" class="uri">https://confluence.uconn.edu/display/CTDA/Datastreams</a>. Therefore, CTDA should be used as a historical preservation video server, but must use either YouTube, Vimeo, or Kaltura examples above to display secondary video clips for display in this book.</p>
</div>
<div id="tables" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">Tables</h4>
<p>This book currently uses Markdown table formatting, with header above and caption (in italicized text) below, using <a href="http://www.tablesgenerator.com/" class="uri">http://www.tablesgenerator.com/</a> to generate Markdown output. Reminder: this does not create a Bookdown-generated auto-numbered figure, so cannot (yet) create dynamic reference.
- TODO prior to final publication: decide whether to use the Bookdown-recommended kable package for tables, and add link to CSV in GitHub repo, and so on.</p>
<p>Sample body text immediately above the table, with optional links and footnote.<a href="#fn201" class="footnote-ref" id="fnref201"><sup>201</sup></a> Currently, use bold type for table header, not hashtags.</p>
<p><strong>Sample table</strong>
| <strong>Header 1</strong> | <strong>Header 2</strong> | <strong>Header 3</strong> |
|—————————|—————————-|————————–|
| Security Grade | Second | Third |
| Location | Hartford | Hartford |
| Trend Next Decade | Stable | Stable |</p>
</div>
<div id="further-reading" class="section level4 unnumbered" number="">
<h4 class="unnumbered" number="">Further Reading</h4>
<ul>
<li>Bookdown sections on Figures <a href="https://bookdown.org/yihui/bookdown/figures.html" class="uri">https://bookdown.org/yihui/bookdown/figures.html</a> and Markdown extensions <a href="https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html" class="uri">https://bookdown.org/yihui/bookdown/markdown-extensions-by-bookdown.html</a>.</li>
<li>On R code chunks in RMarkdown <a href="https://bookdown.org/yihui/rmarkdown/r-code.html" class="uri">https://bookdown.org/yihui/rmarkdown/r-code.html</a></li>
<li>On R code chunk options in knitr package <a href="https://yihui.name/knitr/options/#code-chunk" class="uri">https://yihui.name/knitr/options/#code-chunk</a></li>
<li>R Markdown book section on figures <a href="https://bookdown.org/yihui/rmarkdown/html-document.html#figure-options" class="uri">https://bookdown.org/yihui/rmarkdown/html-document.html#figure-options</a></li>
<li>R Markdown reference <a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf" class="uri">https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf</a></li>
<li>On positioning images in LaTeX <a href="https://www.overleaf.com/learn/latex/Positioning_images_and_tables" class="uri">https://www.overleaf.com/learn/latex/Positioning_images_and_tables</a></li>
<li>Tips and tricks for working with images and figures in rmarkdown <a href="http://zevross.com/blog/2017/06/19/tips-and-tricks-for-working-with-images-and-figures-in-r-markdown-documents/#arguments-out.width-and-out.height-apply-to-both-existing-images-and-r-generated-figures" class="uri">http://zevross.com/blog/2017/06/19/tips-and-tricks-for-working-with-images-and-figures-in-r-markdown-documents/#arguments-out.width-and-out.height-apply-to-both-existing-images-and-r-generated-figures</a></li>
<li>Hints on using auto_pdf: <a href="https://blog.earo.me/2019/10/26/reduce-frictions-rmd/" class="uri">https://blog.earo.me/2019/10/26/reduce-frictions-rmd/</a></li>
</ul>
<p><img src="images/cc-by-nc-sa-88x31.png" alt="creative commons by-nc-sa icon" /> <em><a href="http://ontheline.trincoll.edu">On The Line</a> is an open-access, born-digital, book-in-progress by <a href="authors-and-contributors.html">Jack Dougherty and contributors</a> at Trinity College, Hartford CT, USA. This work is copyrighted by the authors and freely distributed under a <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>. Learn about our <a href="copyright-with-open-access.html">open-access policy and code repository</a> and <a href="how-to-read-and-cite.html">how to read and cite</a> our work. This book-in-progress was last updated on: 2020-01-06</em></p>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="197">
<li id="fn197"><p>This is a footnote, with no reference.<a href="style-guide.html#fnref197" class="footnote-back">↩︎</a></p></li>
<li id="fn198"><p>Hirsch, <em>Making the Second Ghetto</em>; Jackson, <em>Crabgrass Frontier</em>; Tyack, <em>The One Best System</em>.<a href="style-guide.html#fnref198" class="footnote-back">↩︎</a></p></li>
<li id="fn199"><p>On this theme, see <span class="citation">Jack Dougherty, “Review of ’Connecticut’s Public Schools: A History, 1650-2000’ by Christopher Collier,” <em>Connecticut History</em> 50, no. 1 (2011): 120–22, <a href="http://digitalrepository.trincoll.edu/cssp_papers/41" role="doc-biblioref">http://digitalrepository.trincoll.edu/cssp_papers/41</a></span>. On a different theme, see <span class="citation">Dougherty et al., “School Choice in Suburbia.”</span>, pp. 33-35<a href="style-guide.html#fnref199" class="footnote-back">↩︎</a></p></li>
<li id="fn200"><p><span class="citation">Clark, “The Charter Oak City.”</span><a href="style-guide.html#fnref200" class="footnote-back">↩︎</a></p></li>
<li id="fn201"><p><span class="citation">Ilyankou and Dougherty, “Leaflet Map of HOLC "Redlining" Security Map for Hartford CT Area, 1937.”</span><a href="style-guide.html#fnref201" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="bookdown.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="alternative.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ontheline/otl-bookdown/edit/master/09.4-style-guide.Rmd",
"text": "Edit on GitHub"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ontheline/otl-bookdown/blob/master/09.4-style-guide.Rmd",
"text": null
},
"download": ["Dougherty-etal-OnTheLine.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true
});
});
</script>

</body>

</html>
